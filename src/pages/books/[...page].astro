---
import { getCollection } from "astro:content";

import BookListPage from "../../templates/BookListPage.astro";

export async function getStaticPaths({ paginate }) {
    const collection = await getCollection("books");
	const shuffledCollection = collection
  	  .map(value => ({ value, sort: Math.random() }))
  	  .sort((a, b) => a.sort - b.sort)
  	  .map(({ value }) => value);

    return paginate(shuffledCollection, { pageSize: 100 });
}

const pageTitle = "books";
const { page } = Astro.props;
---

<BookListPage
  page={page} 
  pageTitle={pageTitle} 
  title="here are some books i have read but not necessarily finished"
/>